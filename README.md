# Доктор Айболит — сервер для напоминаний о приеме лекарств

Сервис разработан для того, чтобы помочь пользователям вовремя принимать назначенные лекарства. Это приложение будет напоминать пациентам о приеме таблеток, учитывая различные параметры, такие как частота приема, длительность лечения и время суток.

## Описание API

### 1. POST `/schedule`

Маршрут используется для создания расписания приема лекарства для пользователя.

**Тело запроса (JSON):**

```json
{
  "user_id": 1,
  "medication_id": 1,
  "frequency": "1 hour",
  "duration": "7 days"
}
```

- user_id: Идентификатор пользователя (пациента).
- medication_id: Идентификатор лекарства.
- frequency: Частота приема, задается в формате INTERVAL, как в PostgreSQL. Возможные значения:
  - `1 hour` — каждые 1 час (ежечасно).
  - `1 hour 17 minutes'` — каждые 1 час 17 минут (будет округляться по условию).
  - `12 hours` — раз в 12 часов.
  - `1 day` — раз в день.
  
  **Важно**: Частота не может быть меньше 1 часа и не может быть больше 1 дня.
- duration: Продолжительность лечения, также задается в формате INTERVAL, как в PostgreSQL. Пример значения:
  - `7 days` — лечение длится 14 дней.
  - `1 month` — лечение длится 1 месяц.
  - `1 year` — лечение длится 1 год.
  
  **Опционально**, если не указано — используется значение по умолчанию.

**Ответ (JSON):**

```json
{
  "schedule_id": 1
}
```

Возвращает идентификатор созданного расписания.

### 2. GET `/schedules?user_id=`

Маршрут используется для получения списка всех расписаний для указанного пользователя.

**Параметры запроса:**

- user_id: Идентификатор пользователя.

**Ответ (JSON):**

```json
{
  "user_id": 1,
  "schedules": [1, 2]
}
```

Возвращает список идентификаторов расписаний для указанного пользователя.

### 3. GET `/schedule?user_id=&schedule_id=`

Маршрут позволяет получить информацию о конкретном расписании для пользователя, включая данные о приеме лекарства на текущий день.

**Параметры запроса:**

- user_id: Идентификатор пользователя.
- schedule_id: Идентификатор расписания.

**Ответ (JSON):**

```json
{
  "user_id": 1,
  "schedule_id": 1,
  "takings": [
    {
      "id": 1,
      "taking_time": "2025-03-08T08:00:00",
      "medication_id": 1
    },
    {
      "id": 2,
      "taking_time": "2025-03-08T08:15:00",
      "medication_id": 1
    }
  ]
}
```

Возвращает список приемов лекарства на текущий день, с указанием времени.

### 4. GET `/next_takings?user_id=`

Маршрут возвращает информацию о ближайших приемах лекарства для пользователя в заданный период времени.

**Параметры запроса:**

- user_id: Идентификатор пользователя.

**Ответ (JSON):**

```json
{
  "user_id": 1,
  "takings": [
    {
      "id": 1,
      "taking_time": "2025-03-08T09:00:00",
      "medication_id": 1,
      "schedule_id": 1
    }
  ]
}
```

Возвращает информацию о ближайших приемах лекарства, согласно конфигурации периода времени.

## Основные особенности

- Частота приема может варьироваться от одного раза в день до ежечасного.
- Расчет времени приема с округлением до ближайших 15 минут.
- Ограничение времени приема лекарств с 8:00 до 22:00.
- Длительность лечения может быть ограничена или постоянной, но не должна быть меньше частоты приема лекарств.
- Система автоматически создает пользователя и лекарство, если они не существуют.
